-- Migration: 002_example_add_index
-- Description: Example migration showing how to add a new index or column
--
-- INSTRUCTIONS:
-- 1. Copy this file and remove the .example extension
-- 2. Update the version number and description
-- 3. Modify the SQL statements for your actual changes
-- 4. Add the migration file to kustomization.yaml configMapGenerator
-- 5. Apply the kustomization to run the migration

\c heatpump_settings

-- Example: Add a new index for faster queries
-- CREATE INDEX IF NOT EXISTS idx_settings_mode ON settings (mode);

-- Example: Add a new column
-- ALTER TABLE settings ADD COLUMN IF NOT EXISTS last_modified_by TEXT;

-- Example: Modify a column type (careful with data)
-- ALTER TABLE settings ALTER COLUMN mode TYPE BIGINT;

-- Record migration (update version and name)
INSERT INTO schema_migrations (version, name) VALUES (2, 'example_add_index')
ON CONFLICT (version) DO NOTHING;
