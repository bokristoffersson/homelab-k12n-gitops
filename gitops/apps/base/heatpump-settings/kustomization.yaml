apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: heatpump-settings
resources:
  - namespace.yaml
  - persistentvolumeclaim.yaml
  - deployment.yaml
  - service.yaml
  - migration-job.yaml
  - redpanda-connect-deployment.yaml
  - heatpump-settings-api-deployment.yaml
  - outbox-processor-deployment.yaml
  - backup-cronjob.yaml
  - backup-aws-credentials-sealed.yaml
  - postgres-credentials-sealed.yaml
  - mqtt-credentials-sealed.yaml

configMapGenerator:
  - name: heatpump-settings-config
    files:
      - configs/heatpump-settings.yaml
  - name: heatpump-settings-api-config
    files:
      - config.yaml=configs/heatpump-settings-api-config.yaml
  - name: postgres-migrations
    files:
      - migrations/001_initial_schema.sql
      - migrations/002_fix_indoor_target_temp_type.sql
      - migrations/003_create_outbox_table.sql
      - migrations/run_migrations.sh
