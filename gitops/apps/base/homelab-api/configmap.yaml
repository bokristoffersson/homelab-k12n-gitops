---
apiVersion: v1
kind: ConfigMap
metadata:
  name: homelab-api-config
  namespace: homelab-api
data:
  config.yaml: |
    database:
      url: "postgresql://$(DATABASE_USER):$(DATABASE_PASSWORD)@timescaledb.timescaledb.svc.cluster.local:5432/telemetry"

    api:
      host: "0.0.0.0"
      port: 8080

    auth:
      # JWKS-based validation (RS256) for Authentik tokens - Claude MCP client credentials
      jwks_url: "https://authentik.k12n.com/application/o/claude-mcp/jwks/"
      issuer: "https://authentik.k12n.com/application/o/claude-mcp/"

      # Placeholder for config parsing compatibility
      jwt_secret: "placeholder"
