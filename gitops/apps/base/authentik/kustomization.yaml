apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: authentik
resources:
  - namespace.yaml
  # PostgreSQL
  - postgres-pvc.yaml
  - postgres-deployment.yaml
  - postgres-service.yaml
  # Redis
  - redis-deployment.yaml
  - redis-service.yaml
  # Authentik Server
  - server-deployment.yaml
  - server-service.yaml
  # Authentik Worker
  - worker-deployment.yaml

  # Blueprints
  - blueprint-heatpump-web.yaml
  - blueprint-kong-api-gateway.yaml
  - blueprint-oauth2-proxy.yaml
  - blueprint-backstage.yaml
  - blueprint-claude-mcp.yaml
  - blueprint-redpanda-console.yaml
  - blueprint-apply-job.yaml

  - postgres-secret-sealed.yaml
  - authentik-secret-sealed.yaml
  - oauth2-proxy-client-secret-sealed.yaml

  # Backup
  - backup-aws-credentials-sealed.yaml
  - backup-cronjob.yaml
