apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudflared
  namespace: cloudflare-tunnel
data:
  config.yaml: |
    tunnel: 0d5b8112-e5ad-41aa-a226-9569a6a1fa6e  # Replace with your tunnel ID
    credentials-file: /etc/cloudflared/creds/token
    
    metrics: 0.0.0.0:2000
    
    ingress:
      - hostname: whoami.k12n.com
        service: http://traefik.traefik-system.svc.cluster.local:80
      - hostname: traefik.k12n.com  
        service: http://traefik.traefik-system.svc.cluster.local:9000
      - hostname: "*.k12n.com"
        service: http://traefik.traefik-system.svc.cluster.local:80
      - service: http_status:404
