id: gh-run-list
title: List GitHub Actions Workflow Runs
intent: gh-run-list
resource: workflow
risk_level: low

preconditions:
  - gh CLI must be authenticated
  - User has read access to repository

command_template: "gh run list --repo {{repo}}"

flags:
  - name: --workflow
    default: null
    note: Filter by workflow file name (e.g., heatpump-settings-api.yml)
  - name: --limit
    default: 10
    note: Number of runs to display
  - name: --status
    default: null
    note: Filter by status (completed, in_progress, queued, etc.)
  - name: --branch
    default: null
    note: Filter by branch name

defaults:
  limit: 10

examples:
  - goal: List latest workflow runs for repository
    render:
      command: gh run list --repo bokristoffersson/homelab-k12n-gitops --limit 5
      checks:
        - gh run view $(gh run list --repo bokristoffersson/homelab-k12n-gitops --limit 1 --json databaseId -q '.[0].databaseId')

  - goal: List runs for specific workflow
    render:
      command: gh run list --repo bokristoffersson/homelab-k12n-gitops --workflow heatpump-settings-api.yml --limit 3
      checks:
        - gh workflow view heatpump-settings-api.yml --repo bokristoffersson/homelab-k12n-gitops

  - goal: List failed workflow runs
    render:
      command: gh run list --repo bokristoffersson/homelab-k12n-gitops --status failure --limit 5
      checks:
        - gh run list --repo bokristoffersson/homelab-k12n-gitops --status failure --json conclusion

  - goal: List runs on main branch
    render:
      command: gh run list --repo bokristoffersson/homelab-k12n-gitops --branch main --limit 10
      checks:
        - git branch

postprocess:
  summarize_to_json: false

notes:
  - Shows workflow execution history
  - Use to find run IDs for detailed viewing
  - Filter by workflow name, status, or branch
  - Common statuses - completed, in_progress, queued, requested, waiting
  - Useful for debugging recent build failures

references:
  - https://cli.github.com/manual/gh_run_list
