id: gh-pr-list
title: List GitHub Pull Requests
intent: gh-pr-list
resource: pull-request
risk_level: low

preconditions:
  - gh CLI must be authenticated
  - User has read access to repository

command_template: "gh pr list --repo {{repo}}"

flags:
  - name: --state
    default: open
    note: Filter by state (open, closed, merged, all)
  - name: --limit
    default: 10
    note: Number of PRs to display
  - name: --author
    default: null
    note: Filter by author username
  - name: --label
    default: null
    note: Filter by label
  - name: --base
    default: null
    note: Filter by base branch

defaults:
  state: open
  limit: 10

examples:
  - goal: List open pull requests
    render:
      command: gh pr list --repo bokristoffersson/homelab-k12n-gitops --state open
      checks:
        - gh pr view $(gh pr list --repo bokristoffersson/homelab-k12n-gitops --limit 1 --json number -q '.[0].number')

  - goal: List all PRs including closed
    render:
      command: gh pr list --repo bokristoffersson/homelab-k12n-gitops --state all --limit 20
      checks:
        - gh pr list --repo bokristoffersson/homelab-k12n-gitops --state merged --limit 5

  - goal: List PRs by specific author
    render:
      command: gh pr list --repo bokristoffersson/homelab-k12n-gitops --author bokristoffersson
      checks:
        - gh pr list --repo bokristoffersson/homelab-k12n-gitops

  - goal: List PRs targeting main branch
    render:
      command: gh pr list --repo bokristoffersson/homelab-k12n-gitops --base main
      checks:
        - git branch

postprocess:
  summarize_to_json: false

notes:
  - Shows pull request list with status
  - Use to find PR numbers for detailed viewing
  - Filter by state, author, label, or base branch
  - States - open, closed, merged, all
  - Useful for code review workflows

references:
  - https://cli.github.com/manual/gh_pr_list
