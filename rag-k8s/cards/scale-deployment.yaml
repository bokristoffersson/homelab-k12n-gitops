id: scale-deployment
title: Scale a Deployment
intent: scale
resource: deployment
risk_level: medium

preconditions:
  - Deployment exists
  - User has edit permissions
  - Cluster has sufficient resources

command_template: "kubectl scale deployment/{{name}} -n {{namespace}} --replicas={{replicas}}"

flags:
  - name: --replicas
    default: "3"
    note: Target number of replicas

defaults:
  replicas: 3

examples:
  - goal: Scale api deployment to 5 replicas
    render:
      command: kubectl scale deployment/api -n prod --replicas=5
      checks:
        - kubectl get deployment api -n prod
        - kubectl rollout status deployment/api -n prod

  - goal: Scale down worker to 0 for maintenance
    render:
      command: kubectl scale deployment/worker -n staging --replicas=0
      checks:
        - kubectl get pods -n staging -l app=worker

postprocess:
  summarize_to_json: false

notes:
  - Scaling to 0 stops all pods
  - Consider HPA (Horizontal Pod Autoscaler) for automatic scaling
  - Check resource quotas before scaling up
  - Verify new pods are Ready before declaring success
  - Medium risk due to potential service disruption

references:
  - https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#scaling-a-deployment
