---
# ServiceMonitor for Pulsar Broker metrics
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: pulsar-broker
  namespace: pulsar
  labels:
    app: pulsar
    component: broker
spec:
  selector:
    matchLabels:
      app: pulsar
      component: broker
  endpoints:
    - port: http
      path: /metrics
      interval: 30s
      scrapeTimeout: 10s
---
# ServiceMonitor for Pulsar Proxy metrics
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: pulsar-proxy
  namespace: pulsar
  labels:
    app: pulsar
    component: proxy
spec:
  selector:
    matchLabels:
      app: pulsar
      component: proxy
  endpoints:
    - port: http
      path: /metrics
      interval: 30s
      scrapeTimeout: 10s
---
# ServiceMonitor for BookKeeper metrics
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: pulsar-bookkeeper
  namespace: pulsar
  labels:
    app: pulsar
    component: bookkeeper
spec:
  selector:
    matchLabels:
      app: pulsar
      component: bookkeeper
  endpoints:
    - port: http
      path: /metrics
      interval: 30s
      scrapeTimeout: 10s
---
# ServiceMonitor for Zookeeper metrics (if exposed)
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: pulsar-zookeeper
  namespace: pulsar
  labels:
    app: pulsar
    component: zookeeper
spec:
  selector:
    matchLabels:
      app: pulsar
      component: zookeeper
  endpoints:
    - port: metrics
      path: /metrics
      interval: 30s
      scrapeTimeout: 10s