redpanda:
  brokers: "localhost:9092"
  group_id: "redpanda-sink-test"
  auto_offset_reset: "earliest"

database:
  url: "postgres://postgres:postgres@localhost:5432/test"
  write:
    batch_size: 10  # Smaller batch for testing
    linger_ms: 100

pipelines:
  # Timeseries pipeline for testing
  - name: "test-telemetry"
    topic: "test-telemetry"
    table: "telemetry"
    data_type: "timeseries"
    timestamp:
      use_now: true
    tags:
      device_id: "$.device_id"
    fields:
      temperature_c:
        path: "$.temperature"
        type: "float"
      power_w:
        path: "$.power"
        type: "int"
  
  # Static data pipeline for testing
  - name: "test-heatpump-devices"
    topic: "test-devices"
    table: "heatpump_devices"
    data_type: "static"
    upsert_key: ["device_id"]
    timestamp:
      use_now: true
    tags:
      device_id: "$.device_id"
    fields:
      name:
        path: "$.name"
        type: "text"
      status:
        path: "$.status"
        type: "text"
      firmware_version:
        path: "$.firmware_version"
        type: "text"

